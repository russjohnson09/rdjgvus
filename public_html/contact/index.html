<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="icon" href="favicon.ico">
        <title>Contact Demo</title>
    </head>
    <body>
            Enter contact information here. Data will be stored locally using IndexedDB. Sort column functionality provided by <a href="http://tablesorter.com">tablesorter</a>. You can sort on multiple columns using shift. You can delete information by selecting a row and pressing delete. Multiple rows can be selected using ctl or shift.
            <div id="todoDemo">
                <div id="contacts-container">
                    <button id="gen">
                        Generate Contact
                    </button>
                    <form>
                        <label> First Name:
                            <input id="fname">
                        </label>
                        <label> Last Name:
                            <input id="lname">
                        </label>
                        <label>Sex:
                            <input id="sex">
                        </label>
                        <label> Phone:
                            <input id="phone">
                        </label>

                        <button id="addContact">
                            Add Contact
                        </button>
                    </form>
                    <table id="contactsTable" class="tablesorter-blue tableSelect-default"></table>
                </div>
            </div>
            
            
            
        <link rel="stylesheet" href="/css/table-select.css">
        <link rel="stylesheet" href="/css/main.css">
        <script src="/js/jquery.js"></script>
        <script src="/js/table.js"></script>
        <script src="/js/table-select.js"></script>
        <script src="contactDB.js"></script>     
        <script src="/tablesorter/js/jquery.tablesorter.js"></script>
        <link rel="stylesheet" href="/tablesorter/css/theme.blue.css">
        
<script>
$(function() {
    var divContainer = $("#contacts-container");
    var table = $("#contactsTable");
    table.contactTable();
    table.bind("contactTableComplete", function(e) {
        table.tablesorter().tableSelect();
        $("html").bind("keypress", function(e) {
            if (e.key == "Del") {
                //$("tr.selected").each(function(ix, el) {
                //    var recId = $(el).data("id");
                //    console.log(recId);
                //    table.trigger("removeRec", [recId]);
                //});
                table.trigger("removeRows");
                table.tablesorter().tableSelect();
            }
        });
    });
    //table.bind("removeRow", function(e, row) {
    //    var recId = $(el).data("id");
    //    table.trigger("removeRec", [recId]);
    //});
    //table.bind("rowsRemoved", function(e, rows) {
    //    rows.each(function(ix, el) {
    //        var recId = $(el).data("id");
    //        console.log(recId);
    //        table.trigger("removeRec", [recId]);
    //    });
    //});

    $("#gen").bind("click", function(e) {
        e.preventDefault();
        var contact = $.testData.genContact();
        table.trigger("addRec", [contact]);
        //table.trigger("addRows");
    });

    $("#addContact").bind("click", function(e) {
        e.preventDefault();
        table.trigger("addRec", [{
            fname : $("#fname").val(),
            lname : $("#lname").val(),
            sex : $("#sex").val(),
            phone : $("#phone").val()
        }]);
    });
}); 

</script>
</body>

</html>
